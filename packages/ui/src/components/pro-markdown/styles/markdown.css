/**
 * ProMarkdown 样式
 * 一套精美的Markdown渲染样式，支持亮色和暗色模式
 * @author FastbuildAI
 */

/* 基础样式 */
.pro-markdown {
    --md-font-sans:
        ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, sans-serif;
    --md-font-mono:
        ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New",
        monospace;

    /* 亮色模式颜色 */
    --md-bg: #ffffff;
    --md-fg: #24292f;
    --md-border: #d0d7de;
    --md-shadow: rgba(0, 0, 0, 0.05);
    --md-accent: #0969da;
    --md-accent-light: #ddf4ff;

    /* 表格颜色 */
    --md-table-border: #d0d7de;
    --md-table-header-bg: #f6f8fa;
    --md-table-row-odd: #ffffff;
    --md-table-row-even: #f6f8fa;

    /* 自定义容器颜色 */
    --md-info-border: #54aeff;
    --md-info-bg: #ddf4ff;
    --md-warning-border: #e3b341;
    --md-warning-bg: #fff8c5;
    --md-danger-border: #ff818a;
    --md-danger-bg: #ffebe9;
    --md-success-border: #57ab5a;
    --md-success-bg: #dafbe1;
    --md-note-border: #c297ff;
    --md-note-bg: #fbefff;

    /* 基础样式 */
    font-family: var(--md-font-sans);
    color: var(--md-fg);
    background-color: var(--md-bg);
    line-height: 1.6;
    font-size: 16px;
    padding: 1rem;
    border-radius: 0.5rem;
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
    max-width: 100%;
}

/* 暗色模式 */
.dark .pro-markdown,
.dark .pro-markdown {
    --md-bg: none;
    --md-fg: #c9d1d9;
    --md-border: #30363d;
    --md-shadow: rgba(0, 0, 0, 0.3);
    --md-accent: #58a6ff;
    --md-accent-light: #1f2937;

    /* 表格颜色 */
    --md-table-border: #30363d;
    --md-table-header-bg: #161b22;
    --md-table-row-odd: #0d1117;
    --md-table-row-even: #161b22;

    /* 自定义容器颜色 */
    --md-info-border: #1f6feb;
    --md-info-bg: rgba(56, 139, 253, 0.15);
    --md-warning-border: #d29922;
    --md-warning-bg: rgba(187, 128, 9, 0.15);
    --md-danger-border: #f85149;
    --md-danger-bg: rgba(248, 81, 73, 0.15);
    --md-success-border: #2ea043;
    --md-success-bg: rgba(46, 160, 67, 0.15);
    --md-note-border: #a371f7;
    --md-note-bg: rgba(163, 113, 247, 0.15);
}

.pro-markdown > div > p:last-child {
    margin-bottom: 0;
}

/* 标题 */
.pro-markdown h1,
.pro-markdown h2,
.pro-markdown h3,
.pro-markdown h4,
.pro-markdown h5,
.pro-markdown h6 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    font-weight: 600;
    line-height: 1.25;
    color: var(--md-fg);
}

.pro-markdown h1 {
    margin: 0.67em 0;
    font-size: 2em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid var(--md-border);
}

.pro-markdown h2 {
    font-size: 1.5em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid var(--md-border);
}

.pro-markdown h3 {
    font-size: 1.25em;
}

.pro-markdown h4 {
    font-size: 1em;
}

.pro-markdown h5 {
    font-size: 0.875em;
}
/* 标题 */

.pro-markdown h6 {
    font-size: 0.85em;
    color: #8b949e;
}

/* 锚点 */
.pro-markdown .header-anchor {
    float: left;
    margin-left: -0.87em;
    padding-right: 0.23em;
    opacity: 0;
    text-decoration: none;
    color: var(--md-accent);
    transition: opacity 0.2s;
}

.pro-markdown h1:hover .header-anchor,
.pro-markdown h2:hover .header-anchor,
.pro-markdown h3:hover .header-anchor,
.pro-markdown h4:hover .header-anchor,
.pro-markdown h5:hover .header-anchor,
.pro-markdown h6:hover .header-anchor {
    opacity: 1;
}

.pro-markdown h1:hover .anchor .octicon-link:before,
.pro-markdown h2:hover .anchor .octicon-link:before,
.pro-markdown h3:hover .anchor .octicon-link:before,
.pro-markdown h4:hover .anchor .octicon-link:before,
.pro-markdown h5:hover .anchor .octicon-link:before,
.pro-markdown h6:hover .anchor .octicon-link:before {
    width: 16px;
    height: 16px;
    content: " ";
    display: inline-block;
    background-color: currentColor;
    -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
    mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
}
/* 锚点 */

/* 段落和文本 */
.pro-markdown p {
    margin-top: 0;
    margin-bottom: 10px;
}

.pro-markdown strong {
    font-weight: 600;
}

.pro-markdown em {
    font-style: italic;
}

.pro-markdown del {
    text-decoration: line-through;
}
/* 段落和文本 */

/* 链接 */
.pro-markdown a {
    color: var(--md-accent);
    text-decoration: none;
    transition: color 0.2s;
}

.pro-markdown a:hover {
    text-decoration: underline;
}
/* 链接 */

/* 列表 */
.pro-markdown ul,
.pro-markdown ol {
    padding-left: 2em;
    margin-top: 0;
    margin-bottom: 1em;
}

.pro-markdown ul ul,
.pro-markdown ul ol,
.pro-markdown ol ul,
.pro-markdown ol ol {
    margin-top: 0;
    margin-bottom: 0;
}

.pro-markdown li {
    margin-bottom: 0.25em;
}

.pro-markdown li + li {
    margin-top: 0.25em;
}
/* 列表 */

/* 任务列表 */
.pro-markdown ul.contains-task-list {
    padding-left: 0;
    list-style: none;
}

.pro-markdown .task-list-item {
    position: relative;
    padding-left: 1.5em;
    list-style-type: none;
}

.pro-markdown .task-list-item input[type="checkbox"] {
    position: absolute;
    left: 0;
    top: 0.3em;
}
/* 任务列表 */

/* 引用块 */
.pro-markdown blockquote {
    margin: 1em 0;
    padding: 0.5em 1em;
    color: #57606a;
    border-left: 0.25em solid var(--md-border);
    background-color: var(--md-code-bg);
    border-radius: 0.25em;
}

.pro-markdown blockquote > :first-child {
    margin-top: 0;
}

.pro-markdown blockquote > :last-child {
    margin-bottom: 0;
}

.dark .pro-markdown blockquote,
.dark .pro-markdown blockquote {
    color: #8b949e;
}
/* 引用块 */

/* 表格 */
.pro-markdown table {
    display: block;
    width: 100%;
    max-width: 100%;
    overflow: auto;
    margin-top: 0;
    margin-bottom: 1em;
    border-spacing: 0;
    border-collapse: collapse;
}

.pro-markdown table tr {
    background-color: var(--md-table-row-odd);
    border-top: 1px solid var(--md-table-border);
}

.pro-markdown table tr:nth-child(2n) {
    background-color: var(--md-table-row-even);
}

.pro-markdown table th,
.pro-markdown table td {
    padding: 0.5em 1em;
    border: 1px solid var(--md-table-border);
}

.pro-markdown table th {
    font-weight: 600;
    background-color: var(--md-table-header-bg);
}
/* 表格 */

/* 水平线 */
.pro-markdown hr {
    height: 1px;
    padding: 0;
    margin: 1.5em 0;
    background-color: var(--md-border);
    border: 0;
}
/* 水平线 */

/* 图片 */
.pro-markdown img {
    max-width: 100%;
    box-sizing: content-box;
    background-color: var(--md-bg);
    border-radius: 0.25em;
    border: 1px solid var(--md-border);
}
/* 图片 */

/* 目录 */
.pro-markdown .table-of-contents {
    margin-bottom: 2em;
    padding: 1em;
    background-color: var(--md-code-bg);
    border: 1px solid var(--md-border);
    border-radius: 0.25em;
}

.pro-markdown .table-of-contents ul {
    list-style-type: none;
    padding-left: 1em;
}

.pro-markdown .table-of-contents a {
    display: block;
    padding: 0.2em 0;
    color: var(--md-fg);
    text-decoration: none;
    transition: color 0.2s;
}

.pro-markdown .table-of-contents a:hover {
    color: var(--md-accent);
}
/* 目录 */

/* 自定义容器 */
.pro-markdown .custom-container {
    margin: 1em 0;
    padding: 0.5em 1em;
    border-left: 0.25em solid;
    border-radius: 0.25em;
}

.pro-markdown .custom-container-title {
    font-weight: 600;
    margin-top: 0;
    margin-bottom: 0.5em;
}

.pro-markdown .custom-container.info {
    background-color: var(--md-info-bg);
    border-color: var(--md-info-border);
}

.pro-markdown .custom-container.warning {
    background-color: var(--md-warning-bg);
    border-color: var(--md-warning-border);
}

.pro-markdown .custom-container.danger {
    background-color: var(--md-danger-bg);
    border-color: var(--md-danger-border);
}

.pro-markdown .custom-container.success {
    background-color: var(--md-success-bg);
    border-color: var(--md-success-border);
}

.pro-markdown .custom-container.note {
    background-color: var(--md-note-bg);
    border-color: var(--md-note-border);
}
/* 自定义容器 */

/* 代码头部复制按钮区域 */
.pro-markdown-code-wrapper {
    position: relative;
    margin: 1em 0;
    border-radius: 6px;
}

.pro-markdown-code-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px;
    font-size: 0.85em;
    background-color: #fafbfc;
    color: var(--foreground);
    position: sticky;
    top: 0;
    border-radius: 0.25em;
    z-index: 10;
    width: 100%;
}

.pro-markdown-code-lang {
    font-family: var(--pro-markdown-code-font-family, monospace);
    color: var(--pro-markdown-code-lang-color, #333);
}

.pro-markdown-copy-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    pointer-events: none;
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

.pro-markdown-copy-icon svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    fill: none;
}

.pro-markdown-copy-button {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 3px;
    color: var(--ui-text);
    font-weight: 500;
    padding-block: calc(var(--spacing) * 1.5);
    padding-inline: calc(var(--spacing) * 2.5);
    border-radius: calc(var(--ui-radius) * 1.5);
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
    transition: all 0.2s ease;
}

.pro-markdown-copy-button:hover {
    background-color: color-mix(in oklab, var(--ui-bg-accented) 75%, transparent);
}

.pro-markdown-copy-button.copied {
    background-color: var(--md-success-bg);
    color: var(--md-success-border);
}

.pro-markdown-copy-button.copied .pro-markdown-copy-icon {
    opacity: 1;
}

.dark .pro-markdown .pro-markdown-code-header {
    background-color: #1a1b26;
}
.dark .pro-markdown .pro-markdown-code-lang {
    color: var(--pro-markdown-code-lang-color-dark, #fff);
}
/* 代码头部复制按钮区域 */

/* 代码块高亮插件样式 */
.pro-markdown .shiki {
    padding: 12px;
    overflow-x: scroll;
    white-space: pre;
    max-width: 100%;
    width: 100%;
    scrollbar-gutter: stable;
    -webkit-overflow-scrolling: touch; /* 让 iOS 设备滚动更流畅 */
}

.pro-markdown .shiki:hover::-webkit-scrollbar {
    display: block;
    width: 6px !important;
    height: 6px !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

.pro-markdown .shiki::-webkit-scrollbar {
    display: block;
    width: 6px !important;
    height: 6px !important;
    cursor: pointer !important;
}

.pro-markdown .shiki::-webkit-scrollbar-thumb {
    border-radius: 10px !important;
    background-color: rgba(93, 94, 95, 0.3) !important;
    cursor: pointer;
}

.pro-markdown .shiki::-webkit-scrollbar-thumb:hover {
    background-color: rgba(93, 94, 95, 0.5) !important;
}

/* 兼容 Firefox */
.pro-markdown .shiki {
    scrollbar-width: thin;
    scrollbar-color: rgba(93, 94, 95, 0.3) transparent;
}

.pro-markdown .shiki:hover {
    scrollbar-width: thin;
    scrollbar-color: rgba(93, 94, 95, 0.5) transparent;
}
/* 代码块高亮插件样式 */

/* KaTeX 数学公式插件相关样式 */
.pro-markdown .katex-block {
    overflow-x: auto;
    overflow-y: hidden;
    text-align: center;
    padding: 1em 0;
}

.pro-markdown .katex-error {
    color: #f85149;
    background-color: var(--md-danger-bg);
    padding: 0.2em 0.4em;
    border-radius: 0.25em;
}
/* KaTeX 数学公式插件相关样式 */

/* Mermaid 图表 */
.pro-markdown .mermaid {
    display: flex;
    justify-content: center;
    overflow-x: auto;
    background-color: #fafbfc;
    padding: 1em;
    border-radius: 0.25em;
    min-width: 50%;
    min-height: 100px;
}

/* .dark .pro-markdown .mermaid {
    background-color: #1a1b26;
} */

/* .pro-markdown .mermaid text,
.pro-markdown .mermaid line {
    color: var(--foreground);
    fill: var(--foreground) !important;
} */
/* Mermaid 图表 */

/* 响应式调整 */
@media (max-width: 768px) {
    .pro-markdown {
        font-size: 14px;
        padding: 0.75rem;
    }

    .pro-markdown pre {
        padding: 0.75em;
    }

    .pro-markdown table {
        font-size: 0.85em;
    }

    .pro-markdown table th,
    .pro-markdown table td {
        padding: 0.4em 0.6em;
    }
}
